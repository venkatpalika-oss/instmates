<!-- force redeploy -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Feed | InstMates</title>

  <meta name="description"
        content="InstMates Feed – real field experiences, troubleshooting stories, and knowledge shared by instrument and analyzer technicians." />

  <!-- Global CSS (LOCKED – DO NOT CHANGE) -->
  <link rel="stylesheet" href="/assets/css/style.css?v=2026-02-17">

  <!-- ================= PAGE ENHANCEMENTS (SAFE) ================= -->
  <style>
    /* Composer upgrade */
    #postInput {
      width: 100%;
      min-height: 120px;
      padding: 14px;
      border-radius: 12px;
      border: 1px solid #d0d7de;
      font-size: 14px;
      resize: vertical;
      transition: 0.2s ease;
      font-family: inherit;
    }

    #postInput:focus {
      outline: none;
      border-color: #0b5ed7;
      box-shadow: 0 0 0 3px rgba(11,94,215,0.1);
    }

    #postBtn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .feed .card.muted {
      text-align: center;
      padding: 24px;
    }

    /* Optional feed visual polish */
    .feed-card {
      padding: 18px;
      transition: 0.2s ease;
    }

    .feed-card:hover {
      transform: translateY(-2px);
    }
  </style>
</head>

<body data-page="feed">

<!-- ================= HEADER ================= -->
<div id="siteHeader"></div>

<!-- ================= BREADCRUMBS ================= -->
<nav class="crumbs" aria-label="Breadcrumb">
  <a href="/index.html">Home</a><span>›</span>
  <span class="current">Feed</span>
</nav>

<!-- ================= MAIN ================= -->
<main class="container">

  <!-- ================= FEED INTRO ================= -->
  <section class="panel">
    <h2>Community Feed</h2>
    <p class="muted">
      Share real field experience, troubleshooting stories,
      calibration insights, and analyzer lessons from the plant floor.
    </p>
  </section>

  <!-- ================= POST COMPOSER ================= -->
  <section class="panel">

    <textarea id="postInput"
      maxlength="1000"
      placeholder="What problem are you facing in the field today?
Example: 4–20 mA stuck at 4 mA after shutdown"></textarea>

    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px;">
      <small class="muted">
        Tip: Use tags like #GC #CEMS #Calibration #PLC
      </small>

      <small class="muted">
        Max 1000 characters
      </small>
    </div>

    <button id="postBtn" class="btn btn-primary full" style="margin-top:12px;">
      Post
    </button>

  </section>

  <!-- ================= FEED LIST ================= -->
  <section class="feed grid grid-1" id="feedContainer">

    <!-- POSTS WILL BE INJECTED HERE BY feed.js -->
    <div class="card muted" id="loadingCard">
      Loading posts…
    </div>

  </section>

</main>

<!-- ================= FOOTER ================= -->
<div id="siteFooter"></div>

<!-- ================= SCRIPTS (ORDER MATTERS) ================= -->

<!-- Header / Footer includes -->
<script src="/assets/js/includes.js?v=2026-02-17"></script>

<!-- Firebase init -->
<script type="module" src="/assets/js/firebase.js?v=2026-02-17"></script>

<!-- Feed logic -->
<script type="module" src="/assets/js/feed.js?v=2026-02-17"></script>

<!-- ================= SAFE DOUBLE-CLICK PROTECTION ================= -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const postBtn = document.getElementById("postBtn");

    if (postBtn) {
      postBtn.addEventListener("click", () => {
        if (postBtn.disabled) return;

        postBtn.disabled = true;
        postBtn.innerText = "Posting...";

        setTimeout(() => {
          postBtn.disabled = false;
          postBtn.innerText = "Post";
        }, 2000);
      });
    }
  });
</script>

</body>
</html>
