<!-- force redeploy -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Feed | InstMates</title>

  <meta name="description"
        content="InstMates Feed ‚Äì real field experiences, troubleshooting stories, and knowledge shared by instrument and analyzer technicians." />

  <!-- Global CSS (LOCKED ‚Äì DO NOT CHANGE) -->
  <link rel="stylesheet" href="/assets/css/style.css?v=2026-02-17">

  <!-- ================= PAGE ENHANCEMENTS (SAFE) ================= -->
  <style>
    /* Composer */
    #postInput {
      width: 100%;
      min-height: 120px;
      padding: 14px;
      border-radius: 12px;
      border: 1px solid #d0d7de;
      font-size: 14px;
      resize: vertical;
      transition: 0.2s ease;
      font-family: inherit;
    }

    #postInput:focus {
      outline: none;
      border-color: #0b5ed7;
      box-shadow: 0 0 0 3px rgba(11,94,215,0.1);
    }

    #postTags, #postType {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ddd;
      margin-top: 10px;
      font-size: 14px;
    }

    #postBtn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .feed .card.muted {
      text-align: center;
      padding: 24px;
    }

    .feed-card {
      padding: 18px;
      transition: 0.2s ease;
    }

    .feed-card:hover {
      transform: translateY(-2px);
    }
  </style>
</head>

<body data-page="feed">

<!-- ================= HEADER ================= -->
<div id="siteHeader"></div>

<!-- ================= BREADCRUMBS ================= -->
<nav class="crumbs" aria-label="Breadcrumb">
  <a href="/index.html">Home</a><span>‚Ä∫</span>
  <span class="current">Feed</span>
</nav>

<!-- ================= MAIN ================= -->
<main class="container">

  <!-- ================= FEED INTRO ================= -->
  <section class="panel">
    <h2>Community Feed</h2>
    <p class="muted">
      Share real field experience, troubleshooting cases,
      calibration insights, and plant-level analyzer knowledge.
    </p>
  </section>

  <!-- ================= HYBRID POST COMPOSER ================= -->
  <section class="panel">

    <!-- Post Type -->
    <select id="postType">
      <option value="question">‚ùì Question</option>
      <option value="fault">üî¥ Fault Report</option>
      <option value="solution">‚úÖ Solution</option>
      <option value="calibration">üìä Calibration</option>
    </select>

    <!-- Post Content -->
    <textarea id="postInput"
      maxlength="1000"
      placeholder="Describe the issue clearly...

Example:
GC channel 3 showing unstable peaks after maintenance.
Actions taken: cleaned column, checked carrier gas pressure."></textarea>

    <!-- Tags -->
    <input
      type="text"
      id="postTags"
      placeholder="Add tags (comma separated) e.g. GC, FID, 4-20mA"
    />

    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px;">
      <small class="muted">
        Use structured posts for better technical discussion.
      </small>

      <small class="muted">
        Max 1000 characters
      </small>
    </div>

    <button id="postBtn" class="btn btn-primary full" style="margin-top:12px;">
      Post
    </button>

  </section>

  <!-- ================= FEED LIST ================= -->
  <section class="feed grid grid-1" id="feedContainer">

    <!-- POSTS INJECTED BY feed.js -->
    <div class="card muted" id="loadingCard">
      Loading posts‚Ä¶
    </div>

  </section>

</main>

<!-- ================= FOOTER ================= -->
<div id="siteFooter"></div>

<!-- ================= SCRIPTS ================= -->

<!-- Header / Footer includes -->
<script src="/assets/js/includes.js?v=2026-02-17"></script>

<!-- Firebase init -->
<script type="module" src="/assets/js/firebase.js?v=2026-02-17"></script>

<!-- Feed logic -->
<script type="module" src="/assets/js/feed.js?v=2026-02-17"></script>

<!-- ================= SAFE DOUBLE-CLICK PROTECTION ================= -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const postBtn = document.getElementById("postBtn");

    if (postBtn) {
      postBtn.addEventListener("click", () => {
        if (postBtn.disabled) return;

        postBtn.disabled = true;
        postBtn.innerText = "Posting...";

        setTimeout(() => {
          postBtn.disabled = false;
          postBtn.innerText = "Post";
        }, 2000);
      });
    }
  });
</script>

</body>
</html>
