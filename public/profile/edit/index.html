<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Edit Profile | InstMates</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Global CSS -->
  <link rel="stylesheet" href="/assets/css/style.css" />

  <!-- Cropper CSS -->
  <link href="https://unpkg.com/cropperjs/dist/cropper.css" rel="stylesheet"/>

  <style>
    .image-preview {
      margin-top: 15px;
      text-align: center;
    }

    .image-preview img {
      max-width: 200px;
      border-radius: 10px;
      display: none;
    }

    #cropContainer {
      margin-top: 20px;
      display: none;
    }

    #cropContainer img {
      max-width: 100%;
    }

    #toast {
      position: fixed;
      bottom: 30px;
      right: 30px;
      padding: 14px 20px;
      border-radius: 8px;
      color: #fff;
      font-weight: 500;
      opacity: 0;
      transition: opacity 0.5s ease;
      z-index: 9999;
    }

    .completion-box {
      margin-top: 15px;
      padding: 10px;
      background: #f5f7fa;
      border-radius: 8px;
      font-size: 14px;
    }

    .completion-bar {
      height: 8px;
      background: #e1e6ec;
      border-radius: 10px;
      margin-top: 6px;
      overflow: hidden;
    }

    .completion-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #4caf50, #2e7d32);
      transition: width 0.5s ease;
    }

    .photo-actions {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      flex-wrap: wrap;
    }
  </style>
</head>

<body data-page="profile-edit">

<div id="siteHeader"></div>

<main class="container">
  <section class="panel">

    <h1>Edit Profile</h1>

    <form id="editProfileForm">

      <h3>Basic Information</h3>

      <label>Full Name</label>
      <input type="text" id="fullName" required />

      <label>Headline</label>
      <input type="text" id="headline" />

      <label>Location</label>
      <input type="text" id="location" />

      <!-- ================= PROFILE PHOTO ================= -->

      <label>Profile Photo</label>

      <div class="photo-actions">
        <input type="file" id="profilePhoto" accept="image/*" hidden />

        <button type="button" id="changePhotoBtn" class="btn btn-ghost">
          Change Photo
        </button>

        <button type="button" id="deletePhotoBtn" class="btn btn-danger" style="display:none;">
          Delete Photo
        </button>
      </div>

      <!-- Preview -->
      <div class="image-preview">
        <img id="imagePreview" />
      </div>

      <!-- Crop Container -->
      <div id="cropContainer">
        <img id="cropImage" />
        <button type="button" id="cropBtn" class="btn btn-primary" style="margin-top:10px;">
          Crop Image
        </button>
      </div>

      <!-- ================= PROFESSIONAL ================= -->

      <h3 style="margin-top:25px;">Professional</h3>

      <label>Specialization</label>
      <input type="text" id="specialization" />

      <label>Analyzers Worked (comma separated)</label>
      <input type="text" id="analyzersWorked" />

      <!-- ================= COMPLETION ================= -->

      <div class="completion-box">
        Profile Completion: <span id="completionPercent">0%</span>
        <div class="completion-bar">
          <div class="completion-fill" id="completionFill"></div>
        </div>
      </div>

      <button type="submit" class="btn btn-primary" style="margin-top:20px;">
        Save Profile
      </button>

    </form>

  </section>
</main>

<div id="siteFooter"></div>

<!-- Toast -->
<div id="toast"></div>

<!-- Scripts -->
<script src="/assets/js/includes.js"></script>
<script type="module" src="/profile/edit/edit-profile.js"></script>

</body>
</html>