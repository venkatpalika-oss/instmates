<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Technician Profile | InstMates</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="/assets/css/style.css?v=2026-01-22" />
</head>

<body data-page="technician-profile">

<div id="siteHeader"></div>

<main class="container">

<section id="profileContainer" class="panel">
  <p class="muted">Loading profile‚Ä¶</p>
</section>

</main>

<div id="siteFooter"></div>

<script src="//assets/js/includes.js"></script>
<script type="module">

import { db } from "/assets/js/firebase.js";
import { doc, getDoc }
from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

const container = document.getElementById("profileContainer");

const params = new URLSearchParams(window.location.search);
const uid = params.get("id");

if (!uid) {
  container.innerHTML = "<p class='muted'>Profile not found.</p>";
} else {
  loadProfile(uid);
}

async function loadProfile(uid) {
  const snap = await getDoc(doc(db, "profiles", uid));

  if (!snap.exists()) {
    container.innerHTML = "<p class='muted'>Profile not found.</p>";
    return;
  }

  const p = snap.data();

  container.innerHTML = `
    <div style="text-align:center">
      <img src="${p.photoURL || "/assets/img/default-avatar.png"}"
           style="width:120px;height:120px;border-radius:50%;object-fit:cover">

      <h2>
        ${p.fullName}
        ${
          p.verified
            ? `<span style="color:#0d6efd;font-size:16px">‚úî Verified</span>`
            : ""
        }
      </h2>

      <p class="muted">${p.role || ""}</p>
      <p class="muted">üìç ${p.location || ""}</p>
    </div>

    <hr style="margin:20px 0">

    <h3>About</h3>
    <p>${p.bio || "No description provided."}</p>

    ${
      Array.isArray(p.skills)
        ? `<h3>Skills</h3><p>${p.skills.join(", ")}</p>`
        : ""
    }
  `;
}

</script>

</body>
</html>
